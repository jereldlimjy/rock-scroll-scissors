import { ethers } from 'ethers';
import gameAbi from './gameAbi.json' assert { type: 'json' };
import * as dotenv from 'dotenv';

dotenv.config();

const GAME_CONTRACT_ADDRESS = '0xdcb73d72e0513c713a2812c75ede60cfe307e73b';

const byteArray = [
  18, 170, 86, 94, 105, 75, 218, 195, 61, 221, 36, 208, 140, 59, 233, 85, 224, 66, 105, 167, 251,
  80, 73, 156, 139, 23, 157, 53, 214, 213, 49, 32, 6, 134, 184, 192, 19, 113, 138, 83, 20, 43, 192,
  18, 127, 179, 0, 66, 148, 24, 68, 179, 73, 57, 84, 231, 92, 202, 150, 0, 62, 29, 234, 88, 9, 19,
  54, 246, 67, 106, 140, 114, 137, 184, 13, 175, 213, 234, 203, 149, 191, 93, 136, 36, 69, 63, 221,
  12, 129, 160, 4, 93, 55, 121, 138, 184, 13, 171, 0, 247, 68, 208, 179, 250, 148, 249, 138, 159,
  156, 160, 198, 247, 25, 181, 111, 152, 226, 99, 9, 71, 187, 108, 91, 143, 229, 17, 78, 132, 24,
  188, 230, 230, 5, 61, 157, 25, 68, 11, 82, 236, 211, 160, 47, 46, 63, 81, 165, 30, 35, 175, 255,
  135, 226, 4, 227, 72, 9, 158, 18, 68, 22, 187, 7, 155, 96, 233, 69, 107, 117, 44, 252, 27, 28,
  152, 152, 183, 42, 113, 211, 179, 61, 35, 105, 218, 118, 111, 114, 173, 144, 47, 15, 167, 37, 137,
  219, 150, 221, 0, 181, 2, 141, 57, 145, 20, 121, 199, 111, 188, 133, 208, 255, 65, 83, 53, 163,
  219, 202, 68, 162, 84, 231, 151, 68, 36, 5, 131, 21, 249, 110, 44, 88, 248, 133, 124, 125, 158,
  63, 28, 11, 194, 67, 234, 168, 165, 12, 83, 172, 237, 221, 174, 210, 245, 119, 91, 43, 224, 12,
  24, 65, 199, 169, 215, 161, 213, 191, 58, 119, 1, 42, 189, 89, 107, 123, 164, 29, 148, 32, 116,
  180, 52, 246, 222, 200, 241, 86, 112, 126, 85, 23, 214, 46, 222, 250, 21, 110, 224, 201, 241, 203,
  51, 32, 213, 28, 178, 142, 110, 18, 232, 249, 140, 220, 49, 50, 186, 80, 76, 180, 63, 89, 212, 2,
  82, 78, 154, 68, 108, 255, 204, 71, 124, 191, 53, 191, 199, 72, 222, 145, 155, 197, 71, 198, 79,
  23, 205, 88, 221, 156, 27, 159, 62, 7, 232, 3, 235, 125, 7, 214, 210, 173, 217, 227, 23, 166, 97,
  101, 158, 210, 159, 202, 113, 176, 86, 143, 107, 204, 209, 77, 13, 52, 211, 4, 205, 119, 77, 12,
  68, 111, 185, 139, 89, 94, 241, 102, 83, 98, 26, 36, 253, 103, 127, 241, 237, 186, 202, 118, 138,
  136, 255, 254, 199, 192, 9, 107, 187, 6, 115, 15, 4, 178, 162, 80, 85, 41, 172, 21, 53, 145, 254,
  138, 56, 210, 3, 152, 113, 206, 139, 61, 174, 224, 148, 101, 192, 209, 119, 240, 247, 147, 68, 26,
  32, 3, 81, 4, 156, 213, 230, 153, 167, 2, 126, 59, 225, 150, 102, 42, 178, 50, 106, 191, 4, 112,
  68, 161, 147, 54, 159, 94, 160, 177, 16, 20, 117, 30, 115, 48, 112, 54, 114, 139, 170, 150, 5,
  221, 1, 249, 102, 181, 174, 66, 62, 109, 140, 119, 154, 34, 100, 227, 212, 83, 182, 141, 242, 18,
  179, 127, 228, 71, 166, 174, 214, 82, 233, 122, 57, 233, 144, 65, 10, 133, 174, 75, 160, 110, 29,
  7, 76, 39, 47, 140, 91, 230, 164, 187, 241, 18, 25, 106, 153, 189, 244, 19, 55, 214, 229, 93, 236,
  130, 35, 200, 51, 153, 133, 159, 109, 24, 106, 86, 162, 93, 35, 43, 236, 146, 218, 94, 144, 44,
  247, 218, 201, 58, 97, 212, 106, 241, 83, 236, 73, 80, 160, 132, 117, 217, 30, 190, 93, 100, 145,
  130, 134, 93, 108, 186, 65, 100, 179, 194, 149, 38, 20, 22, 235, 124, 120, 130, 216, 109, 62, 174,
  178, 83, 122, 214, 79, 98, 43, 231, 91, 182, 95, 111, 233, 49, 158, 107, 111, 195, 160, 210, 252,
  29, 167, 101, 150, 119, 132, 137, 226, 29, 192, 43, 32, 157, 51, 229, 143, 206, 4, 37, 64, 71,
  181, 149, 93, 55, 156, 44, 122, 0, 0, 86, 190, 41, 218, 149, 60, 59, 105, 168, 18, 127, 125, 222,
  109, 236, 22, 245, 120, 73, 219, 185, 175, 159, 102, 2, 105, 30, 232, 199, 240, 107, 12, 80, 164,
  12, 205, 252, 176, 42, 79, 216, 57, 183, 159, 228, 77, 185, 195, 102, 190, 21, 227, 115, 98, 165,
  190, 57, 255, 7, 44, 213, 139, 183, 48, 242, 244, 38, 90, 204, 63, 110, 125, 27, 192, 239, 109,
  107, 148, 24, 70, 241, 67, 73, 137, 152, 194, 158, 196, 10, 170, 226, 181, 230, 109, 234, 18, 37,
  243, 26, 80, 49, 172, 211, 13, 242, 181, 227, 221, 162, 104, 126, 158, 215, 230, 228, 62, 27, 132,
  41, 142, 114, 172, 30, 131, 184, 3, 73, 200, 87, 54, 19, 181, 53, 155, 192, 77, 58, 87, 161, 113,
  164, 126, 102, 253, 106, 70, 102, 203, 143, 128, 7, 217, 174, 161, 173, 67, 143, 110, 245, 48,
  244, 169, 29, 59, 110, 150, 216, 106, 221, 178, 139, 206, 128, 37, 69, 81, 237, 224, 246, 24, 22,
  98, 86, 108, 42, 141, 115, 110, 175, 203, 84, 164, 69, 148, 39, 205, 185, 224, 27, 93, 243, 248,
  181, 118, 254, 193, 154, 26, 196, 48, 160, 236, 104, 161, 99, 215, 227, 232, 22, 190, 213, 136,
  142, 254, 187, 240, 34, 94, 221, 126, 118, 216, 199, 149, 67, 56, 196, 37, 220, 54, 193, 207, 235,
  89, 198, 65, 129, 145, 133, 111, 50, 36, 106, 106, 47, 236, 130, 159, 45, 69, 66, 159, 193, 220,
  221, 143, 162, 50, 252, 167, 79, 68, 253, 14, 197, 227, 8, 202, 168, 79, 66, 255, 248, 85, 66,
  180, 36, 16, 129, 147, 13, 40, 191, 80, 171, 41, 213, 245, 153, 207, 90, 75, 98, 191, 184, 117, 6,
  72, 41, 69, 137, 104, 107, 48, 215, 40, 113, 220, 232, 96, 161, 131, 31, 101, 130, 84, 178, 237,
  65, 135, 18, 164, 81, 188, 120, 30, 34, 108, 255, 50, 1, 149, 129, 27, 147, 44, 55, 75, 86, 63,
  54, 88, 128, 61, 4, 164, 37, 3, 209, 97, 10, 181, 70, 95, 160, 66, 204, 165, 124, 225, 174, 46,
  250, 166, 22, 149, 25, 103, 69, 171, 97, 184, 94, 86, 221, 197, 13, 250, 53, 130, 240, 185, 31,
  125, 198, 32, 214, 98, 227, 212, 65, 103, 43, 180, 126, 92, 64, 204, 200, 155, 44, 249, 77, 77,
  63, 180, 29, 206, 17, 36, 28, 56, 118, 119, 212, 182, 126, 210, 71, 149, 47, 106, 27, 57, 220,
  152, 10, 57, 93, 198, 138, 156, 38, 151, 19, 216, 81, 249, 132, 101, 21, 239, 161, 128, 240, 163,
  173, 225, 216, 185, 114, 156, 109, 244, 174, 43, 9, 84, 182, 212, 154, 224, 122, 180, 166, 228,
  177, 130, 62, 165, 143, 230, 10, 138, 44, 236, 243, 219, 243, 31, 117, 187, 48, 247, 121, 23, 207,
  47, 249, 74, 143, 225, 33, 200, 249, 133, 145, 2, 106, 41, 50, 225, 119, 53, 27, 94, 134, 124,
  212, 147, 131, 126, 85, 24, 18, 49, 69, 61, 43, 181, 40, 123, 33, 175, 47, 36, 223, 77, 94, 24,
  86, 132, 153, 35, 248, 174, 14, 71, 151, 185, 189, 147, 92, 183, 89, 255, 252, 249, 232, 223, 246,
  170, 60, 5, 187, 142, 11, 206, 182, 37, 138, 207, 184, 240, 61, 182, 48, 193, 37, 226, 182, 117,
  121, 142, 3, 227, 40, 75, 86, 64, 93, 110, 21, 68, 221, 251, 96, 242, 89, 73, 6, 38, 230, 199,
  130, 169, 182, 231, 18, 218, 33, 83, 120, 228, 191, 23, 125, 189, 169, 249, 249, 102, 223, 251, 6,
  222, 78, 166, 32, 5, 23, 20, 81, 251, 58, 26, 60, 160, 124, 94, 4, 106, 30, 68, 108, 90, 150, 7,
  63, 232, 120, 239, 123, 118, 142, 168, 32, 65, 105, 45, 55, 137, 200, 148, 58, 25, 67, 201, 21,
  61, 242, 175, 240, 162, 5, 6, 66, 168, 120, 183, 118, 120, 82, 223, 96, 201, 220, 59, 104, 100,
  213, 52, 22, 230, 241, 128, 103, 41, 10, 33, 95, 152, 43, 206, 115, 205, 39, 21, 212, 83, 21, 189,
  211, 58, 222, 228, 193, 242, 32, 215, 151, 159, 3, 115, 145, 187, 28, 224, 193, 139, 175, 67, 146,
  76, 79, 178, 30, 71, 10, 226, 90, 177, 159, 40, 203, 196, 239, 68, 144, 188, 219, 205, 153, 201,
  191, 203, 40, 226, 237, 188, 25, 235, 64, 38, 190, 174, 60, 81, 64, 44, 43, 209, 42, 124, 5, 136,
  175, 90, 37, 180, 89, 201, 144, 163, 138, 65, 98, 47, 1, 117, 126, 46, 147, 243, 168, 113, 53,
  127, 134, 102, 202, 68, 24, 180, 128, 176, 20, 95, 58, 191, 157, 143, 245, 142, 244, 62, 158, 123,
  70, 143, 25, 231, 116, 81, 141, 149, 46, 129, 198, 59, 192, 13, 83, 217, 25, 186, 17, 252, 65,
  243, 251, 83, 99, 169, 18, 96, 157, 93, 246, 75, 73, 79, 32, 17, 39, 199, 239, 168, 224, 2, 237,
  235, 214, 126, 80, 183, 17, 111, 163, 141, 171, 189, 79, 32, 69, 165, 101, 42, 247, 155, 34, 248,
  226, 90, 67, 216, 59, 35, 130, 65, 187, 26, 53, 26, 148, 204, 212, 158, 31, 112, 117, 221, 155,
  145, 117, 62, 232, 3, 217, 14, 181, 135, 222, 226, 220, 220, 41, 77, 254, 251, 33, 82, 24, 243,
  166, 205, 18, 124, 8, 230, 26, 252, 10, 116, 170, 44, 87, 29, 57, 5, 101, 109, 59, 255, 233, 245,
  50, 116, 206, 25, 29, 226, 236, 21, 90, 60, 150, 239, 74, 205, 38, 186, 38, 48, 28, 150, 206, 97,
  129, 1, 55, 109, 205, 218, 164, 84, 25, 231, 187, 64, 86, 47, 47, 132, 14, 94, 73, 155, 50, 162,
  72, 248, 18, 250, 39, 51, 62, 135, 88, 56, 95, 253, 35, 0, 37, 38, 45, 239, 182, 184, 31, 133, 10,
  30, 195, 189, 23, 212, 23, 213, 159, 42, 169, 211, 154, 171, 40, 77, 151, 233, 169, 179, 130, 108,
  78, 119, 63, 53, 179, 138, 106, 95, 37, 212, 121, 230, 180, 23, 30, 196, 15, 85, 243, 30, 198, 70,
  48, 194, 18, 171, 186, 103, 30, 132, 103, 152, 180, 132, 229, 163, 47, 192, 32, 165, 170, 188,
  154, 249, 215, 143, 51, 129, 201, 166, 152, 24, 25, 51, 205, 92, 3, 189, 26, 95, 73, 251, 248,
  160, 173, 133, 145, 53, 116, 140, 154, 77, 7, 231, 99, 153, 140, 224, 7, 15, 237, 191, 201, 141,
  9, 153, 130, 18, 41, 64, 49, 128, 158, 0, 253, 122, 183, 46, 40, 137, 167, 60, 3, 237, 254, 246,
  120, 143, 91, 46, 205, 15, 29, 85, 42, 139, 235, 226, 135, 61, 17, 36, 47, 5, 149, 54, 66, 183,
  13, 71, 65, 181, 208, 42, 117, 25, 214, 41, 88, 230, 139, 104, 224, 24, 164, 89, 97, 108, 217, 88,
  218, 75, 25, 17, 108, 65, 114, 139, 231, 39, 197, 97, 104, 235, 38, 146, 180, 231, 71, 98, 190,
  120, 74, 178, 165, 182, 128, 79, 235, 129, 41, 161, 206, 46, 35, 48, 29, 248, 67, 190, 212, 215,
  7, 143, 144, 17, 73, 98, 28, 161, 249, 134, 36, 103, 100, 236, 254, 124, 34, 41, 175, 241, 21,
  200, 190, 28, 21, 249, 36, 48, 148, 93, 209, 56, 80, 155, 153, 255, 214, 107, 77, 122, 165, 210,
  126, 135, 230, 79, 39, 170, 80, 47, 255, 45, 253, 195, 102, 171, 16, 63, 127, 210, 155, 107, 183,
  71, 42, 149, 85, 170, 88, 197, 200, 93, 1, 108, 149, 70, 255, 225, 163, 149, 145, 9, 244, 71, 170,
  188, 38, 121, 41, 111, 119, 196, 50, 130, 136, 133, 12, 154, 181, 1, 25, 58, 26, 126, 244, 114,
  141, 57, 18, 181, 155, 84, 50, 17, 172, 254, 169, 39, 110, 136, 13, 253, 42, 246, 49, 37, 36, 195,
  214, 181, 5, 201, 57, 219, 138, 240, 251, 238, 57, 89, 191, 174, 161, 160, 200, 43, 204, 225, 157,
  1, 234, 214, 43, 120, 120, 208, 54, 2, 141, 18, 183, 137, 51, 83, 150, 233, 59, 199, 131, 239,
  207, 110, 173, 165, 65, 78, 161, 193, 127, 31, 102, 75, 55, 7, 14, 188, 162, 93, 157, 241, 127,
  219, 0, 130, 133, 31, 21, 139, 23, 104, 166, 238, 30, 30, 154, 208, 253, 186, 58, 72, 233, 32,
  192, 120, 19, 252, 44, 51, 1, 127, 188, 143, 163, 183, 53, 172, 5, 140, 115, 26, 147, 126, 120,
  240, 188, 56, 189, 46, 227, 118, 135, 47, 98, 171, 115, 223, 28, 76,
];

async function main() {
  const provider = new ethers.JsonRpcProvider(process.env.SEPOLIA_RPC_URL ?? '');
  const wallet = new ethers.Wallet(process.env.SEPOLIA_DEPLOYER_PRIVATE_KEY ?? '', provider);
  const gameContract = new ethers.Contract(GAME_CONTRACT_ADDRESS, gameAbi, wallet);

  // console.log('bytes:', ethers.hexlify(new Uint8Array(byteArray)));
  // console.log(
  //   'bytes32:',
  //   ethers.hexlify(
  //     new Uint8Array([
  //       231, 246, 192, 17, 119, 110, 141, 183, 205, 51, 11, 84, 23, 79, 215, 111, 125, 2, 22, 182,
  //       18, 56, 122, 95, 252, 251, 129, 230, 240, 145, 150, 131,
  //     ]),
  //   ),
  // );

  // try create game
  try {
    const createGameTx = await gameContract.createGame(
      '0x8B151eBF6Ca9D3b5Bfdd1Eeb0b4F3e792B5061D9',
      ethers.hexlify(new Uint8Array(byteArray)),
      ethers.hexlify(
        new Uint8Array([
          164, 199, 107, 150, 250, 211, 182, 180, 65, 233, 45, 168, 6, 3, 227, 17, 47, 83, 41, 175,
          90, 33, 72, 6, 223, 132, 232, 221, 222, 244, 170, 181,
        ]),
      ),
    );
    const createGameTxReceipt = await createGameTx.wait();

    console.log('create game receipt:', createGameTxReceipt);
  } catch (err) {
    console.error(err.message);
  }

  // try resolve game
  // try {
  //   const resolveGameTx = await gameContract.resolveGame(0, 2, 70);
  //   const resolveGameTxReceipt = await resolveGameTx.wait();
  //   console.log('resolve game receipt:', resolveGameTxReceipt);
  // } catch (err) {
  //   console.error(err);
  // }
}

main().catch(err => {
  console.error(err);
});
